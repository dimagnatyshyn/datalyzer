# Структура
Посилання на діаграму зі структурою бази даних: https://github.com/MishaHnatyshyn/Datalyzer/blob/develop/reports/DBModel.pdf

# Опис
***1. Users***

Дані створюються під час реєстрації користувача, і включають в себе юзернейм, пароль, дата створення і тип (можливість вибору типу користувача - користувач з можливістю для перегляду даних, чи адміністратор).
Використовуються під час авторизації. 
Адміністратор має можливість записувати інформацію, потрібну для створення зв’язку з зовнішньою базою даних, обирати з неї дані, які будуть використовуватися для створення моделей для їх перегляду користувачем, надавати доступ користувачам для перегляду цих даних. 
Користувач - на основі доступних моделей будує графіки які може зберігати на дешбордах. Має можливість експорту дешборду в пдф.

![Users](./images/image3.png?raw=true)

***2. Db connection***
 
Дані містять інформацію про зовнішню базу даних, а саме юзернейм для доступу, пароль, хост, порт, назву і тип бази(на даний момент використовується PostgreSQL), а також адміністратора, який створив ці дані.
Створюються адміністратором.
Використовуються:
а) під час створення зв’язку з базою даних при авторизації користувача, який має доступ до перегляду інформації з даної бази, чи перегляду її адміністратором. 
b) під час закриття зв’язку з базою даних після певного періоду часу після відкриття.

Створена окрема сутність, в якій будуть вказуватися типи бази даних(на даний момент з’єднання можливе з PostgreSQL).

![Db connection](./images/image1.png?raw=true)

***3. Data model***

Для опису моделей даних, які відображатимуться користувачеві створені 4 сутності.

![Data mode](./images/image6.png?raw=true)

**3.1.  Data_models**

Зберігається назва моделі, посилання на дані про базу даних на основі якої побудована дана модель, а також посилання на адміністратора, який її створив.

Створюються адміністратором.
Використовується при відображенні користувачу таблиць з даними, на основі яких він може будувати певний графік. 

**3.2. Model_item** 

Відображає певну таблицю з моделі. Зберігається назва моделі в зовнішній базі даних, посилання на неї, а також поточна назва, яка могла бути змінена адміністратором.
Містить зв’язок з таблицею Data_models. 
Дані створюються адміністратором.

Дані використовуються для створення таблиці, яка відображатиметься користувачу. 

**3.3. Model_iteam_field_description** 

Відображає поля(стовпці), які будуть використовуватися для створення певної таблиці в моделі. Містить інформацію про назву поля в зовнішній таблиці, назву, яка буде відображатися користувачу(може бути змінена адміністратором), посилання на таблицю в моделі, яка буде містити дане поле, а також тип поля - факт чи вимір. 
Містить зв’язок з таблицею Model_item. 

Дані використовуються для створення таблиці, а також побудови графіків.

**3.4. Model_items_relations**

Містить посилання на інші таблиці, а також їх поля. 
Має зв’язки з таблицями Data_models та Model_item.
Створена для зберігання даних про зв’язки між певними полями різних таблиць в моделі.   

Використовується, при відображенні користувачу графіку з даними з різних таблиць, а саме для пошуку зв’язків між ними.

***4. Chart***

Для відображення даних про графіки створені 3 таблиці. 

![Chart](./images/image4.png?raw=true)

**4.1 Chart**

Дані містять інформацію про користувача, який створив даний графік, його назву, тип графіку, посилання на дешборд в якому знаходиться, посилання на модель на основі якої побудований, ширину та висоту, координати лівого верхнього кута на дешборді.

Дані створюються під час вибору користувачем таблиці, яку він хоче відобразити.
Дані змінюються при зміні положення графіку на дешборді.

Використовуються для відображення даних певної таблиці у вигляді графіку.

**4.2 chart_data_item** 

Дана таблиця містить інформацію про набір однотипних даних(поле/стовпчик з моделі) який задіяно в побудові діаграми, посилання на саму діаграму, де буде використовуватися, посилання на поле в таблиці моделі, тип (міра чи факт) та колір відображення на графіку.

Використовується для побудови графіку, обраного користувачем.

**4.3 chart_types**

Містить дані про типи можливих графіків.
Використовується в таблиці chart.

Використовується під час побудови графіку.

***5. Dashboard***

Містить дані про дешборд, а саме його назву, а також посилання на користувача, який воно створене. 

Використовується після авторизації користувача, для відображення його збережених графіків, при екпорті графіків в файл pdf формату, а також для запису при створенні нового дешборду.

![Dashboard](./images/image2.png?raw=true)

***6. User_model***

Дана таблиця є службовою, а також слугує для связування інших таблиць в форматі Багато-до-Багатьох.
Дані створюються адміністратором. 
Відображає зв’язок моделі і користувачів - модель може бути доступна кільком користувачам, один користувач може мати в доступі кілька моделей.

Використовується після авторизації користувача, для відображення доступних йому даних.

![User_model](./images/image5.png?raw=true)
